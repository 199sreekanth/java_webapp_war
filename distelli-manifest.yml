ipcrm/java_webapp_war:
  PreBuild:
    - mvn -B dependency:go-offline
  Build:
    - mvn -B clean package
  PkgInclude:
    - 'target/java-webapp.war'
  PreInstall:
    - sudo /opt/puppetlabs/bin/puppet agent -t
  PostInstall:
    - sudo cp target/java-webapp.war /opt/apache-tomcat8/webapps/
  Exec:
    - export JAVA_HOME=/usr/lib/jvm/jre-openjdk
    - sudo -E /opt/apache-tomcat8/bin/catalina.sh run
